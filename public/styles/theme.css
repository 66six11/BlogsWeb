/* Theme CSS Variables and Styles */
/* =================================================================================
   All CSS variables are derived from config.ts color configurations.
   This file provides CSS custom properties that can be used throughout the app.
   
   USAGE IN COMPONENTS:
   Instead of using hardcoded Tailwind colors like:
     - className="bg-slate-900/60"
     - className="text-amber-400"
   
   Use the semantic utility classes defined below:
     - className="bg-card"
     - className="text-highlight"
   
   Or use inline styles with CSS variables:
     - style={{ backgroundColor: 'var(--bg-card)' }}
     - style={{ color: 'var(--text-highlight)' }}
   =================================================================================
*/

/* CSS Variables for theming */
/* Default theme (dark mode) - values from THEME_CONFIG.dark */
:root {
  /* Theme colors from THEME_CONFIG.dark */
  --theme-primary: #897b8c;
  --theme-secondary: #4d4658;
  --theme-tertiary: #3b3442;
  --theme-accent1: #deb99a;
  --theme-accent2: #c493b1;
  --theme-accent3: #7C85EB;
  --theme-text-primary: #f1f5f9;
  --theme-text-secondary: #e2e8f0;
  
  /* Semantic color mappings for dark mode */
  --bg-primary: var(--theme-tertiary);
  --bg-secondary: var(--theme-secondary);
  --bg-tertiary: var(--theme-primary);
  --text-primary: var(--theme-text-primary);
  --text-secondary: var(--theme-text-secondary);
  --accent-1: var(--theme-accent1);
  --accent-2: var(--theme-accent2);
  --accent-3: var(--theme-accent3);
  
  /* =========================================================================
     SEMANTIC UI VARIABLES
     These provide semantic meaning to colors for easier component styling
     ========================================================================= */
  
  /* Background colors for different UI contexts */
  --bg-card: rgba(77, 70, 88, 0.6);           /* Card backgrounds */
  --bg-card-hover: rgba(77, 70, 88, 0.8);     /* Card hover state */
  --bg-surface: rgba(59, 52, 66, 0.6);        /* Surface/panel backgrounds */
  --bg-overlay: rgba(15, 23, 42, 0.8);        /* Overlay/modal backgrounds */
  --bg-code: rgba(15, 23, 42, 0.8);           /* Code block backgrounds */
  --bg-nav: rgba(59, 52, 66, 0.6);            /* Navigation backgrounds */
  --bg-input: rgba(30, 41, 59, 0.8);          /* Input field backgrounds */
  --bg-button: var(--theme-accent3);          /* Primary button background */
  --bg-button-secondary: rgba(100, 116, 139, 0.3); /* Secondary button background */
  
  /* Text colors for different contexts */
  --text-heading: var(--theme-text-primary);  /* Headings */
  --text-body: var(--theme-text-secondary);   /* Body text */
  --text-muted: rgba(148, 163, 184, 0.8);     /* Muted/subtle text */
  --text-highlight: var(--theme-accent1);     /* Highlighted text (gold) */
  --text-accent: var(--theme-accent3);        /* Accent text (purple) */
  --text-link: var(--theme-accent2);          /* Link text */
  --text-code: #c4b5fd;                       /* Code text */
  
  /* Border colors */
  --border-default: rgba(255, 255, 255, 0.1); /* Default borders */
  --border-subtle: rgba(255, 255, 255, 0.05); /* Subtle borders */
  --border-accent: rgba(251, 191, 36, 0.3);   /* Accent borders (gold) */
  --border-focus: var(--theme-accent3);       /* Focus state borders */
  
  /* Icon colors from ICON_COLORS */
  --icon-primary: #F3D493;
  --icon-secondary: #6979D9;
  --icon-accent: #F00608;
  --icon-default: #fbbf24;
  
  /* UI Colors from UI_COLORS */
  --ui-success: #10b981;
  --ui-warning: #f59e0b;
  --ui-error: #ef4444;
  --ui-info: #3b82f6;
  --ui-button-primary: #7c3aed;
  --ui-button-primary-hover: #8b5cf6;
  --ui-button-secondary: #64748b;
  
  /* Callout colors from UI_COLORS.callout */
  --callout-info: #3b82f6;
  --callout-tip: #10b981;
  --callout-warning: #f97316;
  --callout-error: #ef4444;
  --callout-question: #f59e0b;
  --callout-quote: #64748b;
  --callout-example: #a855f7;
  --callout-summary: #06b6d4;
  
  /* Playhead and glow colors */
  --playhead: #fbbf24;
  --glow-gold: #fbbf24;
  --glow-purple: #7c3aed;
  
  /* Scene/3D colors from SCENE_COLORS */
  --scene-particles: #fbbf24;
  
  /* Hexagram colors from HEXAGRAM_COLORS */
  --hexagram-primary: rgb(251, 191, 36);
  --hexagram-secondary: rgb(251, 143, 36);
}

/* Light theme - values from THEME_CONFIG.light */
:root.light {
  --theme-primary: #F7F8F3;
  --theme-secondary: #EBECF2;
  --theme-tertiary: #e3d8d8;
  --theme-accent1: #deb99a;
  --theme-accent2: #7C85EB;
  --theme-accent3: #c493b1;
  --theme-text-primary: #1e293b;
  --theme-text-secondary: #475569;
  
  /* Semantic mappings for light mode */
  --bg-primary: var(--theme-primary);
  --bg-secondary: var(--theme-secondary);
  --bg-tertiary: var(--theme-tertiary);
  --text-primary: var(--theme-text-primary);
  --text-secondary: var(--theme-text-secondary);
  --accent-1: var(--theme-accent1);
  --accent-2: var(--theme-accent2);
  --accent-3: var(--theme-accent3);
  
  /* Semantic UI variables for light mode */
  --bg-card: rgba(235, 236, 242, 0.6);
  --bg-card-hover: rgba(235, 236, 242, 0.8);
  --bg-surface: rgba(247, 248, 243, 0.8);
  --bg-overlay: rgba(255, 255, 255, 0.95);
  --bg-code: rgba(30, 41, 59, 0.05);
  --bg-nav: rgba(247, 248, 243, 0.6);
  --bg-input: rgba(255, 255, 255, 0.8);
  --bg-button: var(--theme-accent2);
  --bg-button-secondary: rgba(100, 116, 139, 0.1);
  
  --text-heading: var(--theme-text-primary);
  --text-body: var(--theme-text-secondary);
  --text-muted: rgba(71, 85, 105, 0.6);
  --text-highlight: #b45309;
  --text-accent: #6d28d9;
  --text-link: var(--theme-accent2);
  --text-code: #6d28d9;
  
  --border-default: rgba(0, 0, 0, 0.1);
  --border-subtle: rgba(0, 0, 0, 0.05);
  --border-accent: rgba(180, 83, 9, 0.3);
  --border-focus: var(--theme-accent2);
}

/* Dark theme - values from THEME_CONFIG.dark */
:root.dark {
  --theme-primary: #897b8c;
  --theme-secondary: #4d4658;
  --theme-tertiary: #3b3442;
  --theme-accent1: #deb99a;
  --theme-accent2: #c493b1;
  --theme-accent3: #7C85EB;
  --theme-text-primary: #f1f5f9;
  --theme-text-secondary: #e2e8f0;
  
  /* Semantic mappings for dark mode */
  --bg-primary: var(--theme-tertiary);
  --bg-secondary: var(--theme-secondary);
  --bg-tertiary: var(--theme-primary);
  --text-primary: var(--theme-text-primary);
  --text-secondary: var(--theme-text-secondary);
  --accent-1: var(--theme-accent1);
  --accent-2: var(--theme-accent2);
  --accent-3: var(--theme-accent3);
  
  /* Semantic UI variables for dark mode (same as :root default) */
  --bg-card: rgba(77, 70, 88, 0.6);
  --bg-card-hover: rgba(77, 70, 88, 0.8);
  --bg-surface: rgba(59, 52, 66, 0.6);
  --bg-overlay: rgba(15, 23, 42, 0.8);
  --bg-code: rgba(15, 23, 42, 0.8);
  --bg-nav: rgba(59, 52, 66, 0.6);
  --bg-input: rgba(30, 41, 59, 0.8);
  --bg-button: var(--theme-accent3);
  --bg-button-secondary: rgba(100, 116, 139, 0.3);
  
  --text-heading: var(--theme-text-primary);
  --text-body: var(--theme-text-secondary);
  --text-muted: rgba(148, 163, 184, 0.8);
  --text-highlight: var(--theme-accent1);
  --text-accent: var(--theme-accent3);
  --text-link: var(--theme-accent2);
  --text-code: #c4b5fd;
  
  --border-default: rgba(255, 255, 255, 0.1);
  --border-subtle: rgba(255, 255, 255, 0.05);
  --border-accent: rgba(251, 191, 36, 0.3);
  --border-focus: var(--theme-accent3);
}

/* =================================================================================
   SEMANTIC UTILITY CLASSES
   Use these classes in components instead of hardcoded Tailwind color classes.
   These classes automatically adapt to light/dark themes.
   ================================================================================= */

/* Background utility classes */
.bg-card { background-color: var(--bg-card); }
.bg-card-hover { background-color: var(--bg-card-hover); }
.bg-surface { background-color: var(--bg-surface); }
.bg-overlay { background-color: var(--bg-overlay); }
.bg-code { background-color: var(--bg-code); }
.bg-nav { background-color: var(--bg-nav); }
.bg-input { background-color: var(--bg-input); }
.bg-theme-primary { background-color: var(--bg-primary); }
.bg-theme-secondary { background-color: var(--bg-secondary); }
.bg-theme-tertiary { background-color: var(--bg-tertiary); }

/* Text utility classes */
.text-heading { color: var(--text-heading); }
.text-body { color: var(--text-body); }
.text-muted { color: var(--text-muted); }
.text-highlight { color: var(--text-highlight); }
.text-accent { color: var(--text-accent); }
.text-link { color: var(--text-link); }
.text-code { color: var(--text-code); }
.text-theme-primary { color: var(--text-primary); }
.text-theme-secondary { color: var(--text-secondary); }

/* Border utility classes */
.border-default { border-color: var(--border-default); }
.border-subtle { border-color: var(--border-subtle); }
.border-accent { border-color: var(--border-accent); }
.border-focus { border-color: var(--border-focus); }

/* Status color utility classes */
.text-success { color: var(--ui-success); }
.text-warning { color: var(--ui-warning); }
.text-error { color: var(--ui-error); }
.text-info { color: var(--ui-info); }
.bg-success { background-color: var(--ui-success); }
.bg-warning { background-color: var(--ui-warning); }
.bg-error { background-color: var(--ui-error); }
.bg-info { background-color: var(--ui-info); }
.border-success { border-color: var(--ui-success); }
.border-warning { border-color: var(--ui-warning); }
.border-error { border-color: var(--ui-error); }
.border-info { border-color: var(--ui-info); }

/* Accent color utility classes */
.text-accent-1 { color: var(--accent-1); }
.text-accent-2 { color: var(--accent-2); }
.text-accent-3 { color: var(--accent-3); }
.bg-accent-1 { background-color: var(--accent-1); }
.bg-accent-2 { background-color: var(--accent-2); }
.bg-accent-3 { background-color: var(--accent-3); }
.border-accent-1 { border-color: var(--accent-1); }
.border-accent-2 { border-color: var(--accent-2); }
.border-accent-3 { border-color: var(--accent-3); }

body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  overflow-x: hidden;
  transition: background-color 0.5s ease, color 0.5s ease;
}

/* Theme transition animations */
:root {
  transition: all 0.5s ease;
}

:root *,
:root *::before,
:root *::after {
  transition: background-color 0.5s ease, 
              border-color 0.5s ease, 
              color 0.5s ease,
              box-shadow 0.5s ease;
}

/* Exclude animations from transition (they need immediate response) */
:root .animate-pulse,
:root .animate-spin,
:root .animate-float,
:root [class*="transition-transform"],
:root [class*="transition-opacity"],
:root [class*="transition-all"]:not(.theme-transition) {
  transition-property: transform, opacity;
}

/* Theme-aware component overrides */
:root.light .nav-bar,
:root.light nav {
  background-color: rgba(247, 248, 243, 0.6) !important;  /* THEME_CONFIG.light.primary with alpha */
  border-color: var(--bg-tertiary) !important;
}

:root.light .nav-bar *,
:root.light nav span,
:root.light nav button {
  color: var(--text-primary) !important;
}

:root.light .card,
:root.light .bg-slate-900\/60,
:root.light .bg-slate-900\/80 {
  background-color: rgba(235, 236, 242, 0.3) !important;  /* THEME_CONFIG.light.secondary with alpha */
}

:root.light .welcome-bg {
  background-color: rgba(235, 236, 242, 1) !important;  /* THEME_CONFIG.light.secondary */
}

:root.light .text-slate-100,
:root.light .text-slate-200,
:root.light .text-white {
  color: var(--text-primary) !important;
}

:root.light .text-slate-300,
:root.light .text-slate-400,
:root.light .text-slate-500 {
  color: var(--text-secondary) !important;
}

:root.light .border-white\/10,
:root.light .border-slate-700,
:root.light .border-slate-800 {
  border-color: var(--bg-tertiary) !important;
}

:root.light footer {
  background-color: rgba(227, 216, 216, 0.95) !important;  /* THEME_CONFIG.light.tertiary with alpha */
}

:root.dark .nav-bar,
:root.dark nav {
  background-color: rgba(59, 52, 66, 0.6) !important;  /* THEME_CONFIG.dark.tertiary with alpha */
}

:root.dark .card,
:root.dark .bg-slate-900\/60,
:root.dark .bg-slate-900\/80 {
  background-color: rgba(77, 70, 88, 0.6) !important;  /* THEME_CONFIG.dark.secondary with alpha */
}

/* Accent color styling */
:root.light .text-amber-400,
:root.light .text-amber-200,
:root.light .text-amber-500 {
  color: var(--accent-1) !important;
}

:root.light .text-purple-300,
:root.light .text-purple-200,
:root.light .text-purple-400 {
  color: var(--accent-2) !important;
}

:root.dark .text-amber-400,
:root.dark .text-amber-200 {
  color: var(--accent-1) !important;
}

:root.dark .text-purple-300,
:root.dark .text-purple-200 {
  color: var(--accent-2) !important;
}

/* Button styling for themes */
:root.light .bg-purple-600 {
  background-color: var(--accent-2) !important;
}

:root.dark .bg-purple-600 {
  background-color: var(--accent-3) !important;
}

/* 修复 Light 模式下标题和文章可读性 */
:root.light h1,
:root.light h2,
:root.light h3,
:root.light .section-title {
  color: #1e293b !important;
}

:root.light .card-title,
:root.light .post-title {
  color: #334155 !important;
}

:root.light .card-description,
:root.light .post-excerpt,
:root.light article p {
  color: #475569 !important;
}

/* 强调色在 Light 模式下使用更深的变体 */
:root.light .text-amber-200,
:root.light .text-amber-400 {
  color: #b45309 !important;
}

:root.light .text-purple-200,
:root.light .text-purple-300 {
  color: #6d28d9 !important;
}

/* 卡片背景在 Light 模式下增加不透明度 */
:root.light .bg-black\/30,
:root.light .bg-slate-900\/50 {
  background-color: rgba(255, 255, 255, 0.8) !important;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
::-webkit-scrollbar-track {
  background: var(--bg-secondary);
  border-radius: 4px;
}
::-webkit-scrollbar-thumb {
  background: var(--accent-3);
  border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--accent-2);
}

#loading-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: var(--accent-1);
  font-family: 'Playfair Display', serif;
  font-size: 1.5rem;
  opacity: 1;
  transition: opacity 0.5s;
}
