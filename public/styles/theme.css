/* Theme CSS Variables and Styles */
/* =================================================================================
   All CSS variables are derived from config.ts color configurations.
   This file provides CSS custom properties that can be used throughout the app.
   =================================================================================
*/

/* CSS Variables for theming */
/* Default theme (dark mode) - values from THEME_CONFIG.dark */
:root {
  /* Theme colors from THEME_CONFIG.dark */
  --theme-primary: #897b8c;
  --theme-secondary: #4d4658;
  --theme-tertiary: #3b3442;
  --theme-accent1: #deb99a;
  --theme-accent2: #c493b1;
  --theme-accent3: #7C85EB;
  --theme-text-primary: #f1f5f9;
  --theme-text-secondary: #e2e8f0;
  
  /* Semantic color mappings for dark mode */
  --bg-primary: var(--theme-tertiary);
  --bg-secondary: var(--theme-secondary);
  --bg-tertiary: var(--theme-primary);
  --text-primary: var(--theme-text-primary);
  --text-secondary: var(--theme-text-secondary);
  --accent-1: var(--theme-accent1);
  --accent-2: var(--theme-accent2);
  --accent-3: var(--theme-accent3);
  
  /* Icon colors from ICON_COLORS */
  --icon-primary: #F3D493;
  --icon-secondary: #6979D9;
  --icon-accent: #F00608;
  --icon-default: #fbbf24;
  
  /* UI Colors from UI_COLORS */
  --ui-success: #10b981;
  --ui-warning: #f59e0b;
  --ui-error: #ef4444;
  --ui-info: #3b82f6;
  --ui-button-primary: #7c3aed;
  --ui-button-primary-hover: #8b5cf6;
  --ui-button-secondary: #64748b;
  
  /* Callout colors from UI_COLORS.callout */
  --callout-info: #3b82f6;
  --callout-tip: #10b981;
  --callout-warning: #f97316;
  --callout-error: #ef4444;
  --callout-question: #f59e0b;
  --callout-quote: #64748b;
  --callout-example: #a855f7;
  --callout-summary: #06b6d4;
  
  /* Playhead and glow colors */
  --playhead: #fbbf24;
  --glow-gold: #fbbf24;
  --glow-purple: #7c3aed;
  
  /* Scene/3D colors from SCENE_COLORS */
  --scene-particles: #fbbf24;
  
  /* Hexagram colors from HEXAGRAM_COLORS */
  --hexagram-primary: rgb(251, 191, 36);
  --hexagram-secondary: rgb(251, 143, 36);
}

/* Light theme - values from THEME_CONFIG.light */
:root.light {
  --theme-primary: #F7F8F3;
  --theme-secondary: #EBECF2;
  --theme-tertiary: #e3d8d8;
  --theme-accent1: #deb99a;
  --theme-accent2: #7C85EB;
  --theme-accent3: #c493b1;
  --theme-text-primary: #1e293b;
  --theme-text-secondary: #475569;
  
  /* Semantic mappings for light mode */
  --bg-primary: var(--theme-primary);
  --bg-secondary: var(--theme-secondary);
  --bg-tertiary: var(--theme-tertiary);
  --text-primary: var(--theme-text-primary);
  --text-secondary: var(--theme-text-secondary);
  --accent-1: var(--theme-accent1);
  --accent-2: var(--theme-accent2);
  --accent-3: var(--theme-accent3);
}

/* Dark theme - values from THEME_CONFIG.dark */
:root.dark {
  --theme-primary: #897b8c;
  --theme-secondary: #4d4658;
  --theme-tertiary: #3b3442;
  --theme-accent1: #deb99a;
  --theme-accent2: #c493b1;
  --theme-accent3: #7C85EB;
  --theme-text-primary: #f1f5f9;
  --theme-text-secondary: #e2e8f0;
  
  /* Semantic mappings for dark mode */
  --bg-primary: var(--theme-tertiary);
  --bg-secondary: var(--theme-secondary);
  --bg-tertiary: var(--theme-primary);
  --text-primary: var(--theme-text-primary);
  --text-secondary: var(--theme-text-secondary);
  --accent-1: var(--theme-accent1);
  --accent-2: var(--theme-accent2);
  --accent-3: var(--theme-accent3);
}

body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  overflow-x: hidden;
  transition: background-color 0.5s ease, color 0.5s ease;
}

/* Theme transition animations */
:root {
  transition: all 0.5s ease;
}

:root *,
:root *::before,
:root *::after {
  transition: background-color 0.5s ease, 
              border-color 0.5s ease, 
              color 0.5s ease,
              box-shadow 0.5s ease;
}

/* Exclude animations from transition (they need immediate response) */
:root .animate-pulse,
:root .animate-spin,
:root .animate-float,
:root [class*="transition-transform"],
:root [class*="transition-opacity"],
:root [class*="transition-all"]:not(.theme-transition) {
  transition-property: transform, opacity;
}

/* Theme-aware component overrides */
:root.light .nav-bar,
:root.light nav {
  background-color: rgba(247, 248, 243, 0.6) !important;  /* THEME_CONFIG.light.primary with alpha */
  border-color: var(--bg-tertiary) !important;
}

:root.light .nav-bar *,
:root.light nav span,
:root.light nav button {
  color: var(--text-primary) !important;
}

:root.light .card,
:root.light .bg-slate-900\/60,
:root.light .bg-slate-900\/80 {
  background-color: rgba(235, 236, 242, 0.3) !important;  /* THEME_CONFIG.light.secondary with alpha */
}

:root.light .welcome-bg {
  background-color: rgba(235, 236, 242, 1) !important;  /* THEME_CONFIG.light.secondary */
}

:root.light .text-slate-100,
:root.light .text-slate-200,
:root.light .text-white {
  color: var(--text-primary) !important;
}

:root.light .text-slate-300,
:root.light .text-slate-400,
:root.light .text-slate-500 {
  color: var(--text-secondary) !important;
}

:root.light .border-white\/10,
:root.light .border-slate-700,
:root.light .border-slate-800 {
  border-color: var(--bg-tertiary) !important;
}

:root.light footer {
  background-color: rgba(227, 216, 216, 0.95) !important;  /* THEME_CONFIG.light.tertiary with alpha */
}

:root.dark .nav-bar,
:root.dark nav {
  background-color: rgba(59, 52, 66, 0.6) !important;  /* THEME_CONFIG.dark.tertiary with alpha */
}

:root.dark .card,
:root.dark .bg-slate-900\/60,
:root.dark .bg-slate-900\/80 {
  background-color: rgba(77, 70, 88, 0.6) !important;  /* THEME_CONFIG.dark.secondary with alpha */
}

/* Accent color styling */
:root.light .text-amber-400,
:root.light .text-amber-200,
:root.light .text-amber-500 {
  color: var(--accent-1) !important;
}

:root.light .text-purple-300,
:root.light .text-purple-200,
:root.light .text-purple-400 {
  color: var(--accent-2) !important;
}

:root.dark .text-amber-400,
:root.dark .text-amber-200 {
  color: var(--accent-1) !important;
}

:root.dark .text-purple-300,
:root.dark .text-purple-200 {
  color: var(--accent-2) !important;
}

/* Button styling for themes */
:root.light .bg-purple-600 {
  background-color: var(--accent-2) !important;
}

:root.dark .bg-purple-600 {
  background-color: var(--accent-3) !important;
}

/* 修复 Light 模式下标题和文章可读性 */
:root.light h1,
:root.light h2,
:root.light h3,
:root.light .section-title {
  color: #1e293b !important;
}

:root.light .card-title,
:root.light .post-title {
  color: #334155 !important;
}

:root.light .card-description,
:root.light .post-excerpt,
:root.light article p {
  color: #475569 !important;
}

/* 强调色在 Light 模式下使用更深的变体 */
:root.light .text-amber-200,
:root.light .text-amber-400 {
  color: #b45309 !important;
}

:root.light .text-purple-200,
:root.light .text-purple-300 {
  color: #6d28d9 !important;
}

/* 卡片背景在 Light 模式下增加不透明度 */
:root.light .bg-black\/30,
:root.light .bg-slate-900\/50 {
  background-color: rgba(255, 255, 255, 0.8) !important;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
::-webkit-scrollbar-track {
  background: var(--bg-secondary);
  border-radius: 4px;
}
::-webkit-scrollbar-thumb {
  background: var(--accent-3);
  border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--accent-2);
}

#loading-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: var(--accent-1);
  font-family: 'Playfair Display', serif;
  font-size: 1.5rem;
  opacity: 1;
  transition: opacity 0.5s;
}
